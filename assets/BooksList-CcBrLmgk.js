import{t as T,r as h,j as e,B as r,S as w,L as B}from"./index-C_Iz8dZ1.js";import{T as L,a as A,b as d,c as t,d as C,e as a}from"./table-DjyyNQEO.js";import{D as I,a as k,b as z,c as E,d as F,e as H,f as _,S as M,T as O,L as P}from"./Loader-CGz4uQcr.js";import{u as R,a as V,L as j,I as g,o as q,s as u}from"./schemas-8MO4LvMr.js";import{u as $,b as G}from"./bookServices-BT8ps4oR.js";import"./index-GnqVebUw.js";const J=q({name:u().min(3,{message:"Name must be at least 3 characters long."}).max(50,{message:"Name cannot exceed 50 characters."}),description:u().min(10,{message:"Description must be at least 3 characters long."}).max(200,{message:"Description cannot exceed 200 characters."})}),Z=()=>{const l=T(s=>s.userId),[b,n]=h.useState(!1),{data:N,isLoading:f}=$(l),{register:c,handleSubmit:y,formState:{errors:i,isValid:v}}=R({resolver:V(J),defaultValues:{name:"",description:""}}),{mutate:S,isPending:o,isError:x,isSuccess:m,data:p}=G(),D=s=>{S({...s,user_id:l,is_active:!0})};return h.useEffect(()=>{!x&&m&&p&&n(!1)},[p,m,x]),e.jsx("div",{className:"header-margin pb-5",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("div",{className:"flex justify-end p-3",children:e.jsx(I,{open:b,onOpenChange:n,children:e.jsxs("form",{children:[e.jsx(k,{asChild:!0,children:e.jsx(r,{className:"rounded-xs",children:"Add New Book"})}),e.jsxs(z,{className:"sm:max-w-[425px]",children:[e.jsx(E,{children:e.jsx(F,{children:"Add New Book"})}),e.jsxs("form",{onSubmit:y(D),className:"flex flex-col gap-4",children:[e.jsx("div",{className:"grid gap-3",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"name",children:"Name"}),e.jsx(g,{type:"text",id:"name",...c("name")}),i.name&&e.jsx("p",{className:"text-sm text-red-500",children:i.name.message})]})}),e.jsx("div",{className:"grid gap-3",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"description",children:"Description"}),e.jsx(g,{type:"text",id:"description",...c("description")}),i.description&&e.jsx("p",{className:"text-sm text-red-500",children:i.description.message})]})}),e.jsxs(H,{children:[e.jsx(_,{asChild:!0,children:e.jsx(r,{variant:"outline",size:"sm",className:"rounded-xs",children:"Cancel"})}),e.jsxs(r,{type:"submit",size:"sm",className:"rounded-xs",disabled:o||!v,children:[o&&e.jsx(w,{})," Add"]})]})]})]})]})})}),e.jsxs(L,{className:"mt-3 w-full border-collapse",children:[e.jsx(A,{children:e.jsxs(d,{className:"text-base",children:[e.jsx(t,{className:"px-4 py-2 text-left border border-gray-200",children:"Id"}),e.jsx(t,{className:"px-4 py-2 text-left border border-gray-200",children:"Name"}),e.jsx(t,{className:"px-4 py-2 text-left border border-gray-200",children:"Description"}),e.jsx(t,{className:"px-4 py-2 text-left border border-gray-200",children:"Status"}),e.jsx(t,{className:"px-4 py-2 text-left border border-gray-200",children:"Actions"})]})}),e.jsxs(C,{children:[N?.map(s=>e.jsxs(d,{children:[e.jsx(a,{className:"px-4 py-2 font-medium border border-gray-200",children:s.id}),e.jsx(a,{className:"px-4 py-2 text-base font-medium border border-gray-200",children:e.jsx(B,{to:`/book/${s.id}`,children:s.name})}),e.jsx(a,{className:"px-4 py-2 border border-gray-200",children:s.description}),e.jsx(a,{className:"px-4 py-2 border border-gray-200",children:s.is_active?e.jsx("span",{className:"px-2 py-1 font-medium rounded-4xl bg-green-200 text-green-800",children:"Active"}):e.jsx("span",{className:"px-2 py-1 font-medium rounded-4xl bg-red-200 text-red-800",children:"Inactive"})}),e.jsx(a,{className:"px-4 py-2 border border-gray-200 w-fit",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{variant:"ghost",className:"text-zinc-400 hover:text-zinc-800",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",className:"text-red-400 hover:text-red-800",children:e.jsx(O,{className:"h-4 w-4"})})]})})]},s.id)),f&&e.jsx(d,{className:"hover:bg-transparent",children:e.jsx(a,{colSpan:5,children:e.jsx(P,{show:!0})})})]})]})]})})};export{Z as default};
