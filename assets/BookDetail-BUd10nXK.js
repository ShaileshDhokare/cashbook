import{c as pe,r as o,j as e,a as Fe,b as S,g as Ve,u as z,d as fe,e as be,P as D,f as G,h as ge,i as je,B as E,k as qe,l as $e,m as te,n as se,o as ae,p as He,q as Ge,s as Ue,t as Qe,v as Xe,w as re}from"./index-C_Iz8dZ1.js";import{S as L,a as M,b as A,c as O,d as y,C as Ke,e as Ye,f as U,g as ne,h as oe,i as ie,j as We,k as Je,u as Ze,l as et,m as le}from"./categoryServices-OEaEtCYp.js";import{S as tt,E as st,a as ce,A as at}from"./AnalysisChart-CndjFqq6.js";import{L as I,X as ve}from"./Loader-CGz4uQcr.js";import{T as rt,a as nt,b as H,c as T,d as ot,e as _}from"./table-DjyyNQEO.js";import{L as Ne,I as it}from"./schemas-8MO4LvMr.js";import{u as lt,a as ct}from"./bookServices-BT8ps4oR.js";import{u as dt}from"./paymentModeServices-BpU8hEEL.js";import"./index-GnqVebUw.js";import"./card-CLjc8Grt.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["line",{x1:"5",x2:"19",y1:"9",y2:"9",key:"1nwqeh"}],["line",{x1:"5",x2:"19",y1:"15",y2:"15",key:"g8yjpy"}]],mt=pe("equal",ut);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],ht=pe("sigma",xt);var pt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ft=pt.reduce((t,s)=>{const a=Fe(`Primitive.${s}`),n=o.forwardRef((c,r)=>{const{asChild:d,...u}=c,m=d?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(m,{...u,ref:r})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{}),bt="Separator",de="horizontal",gt=["horizontal","vertical"],ye=o.forwardRef((t,s)=>{const{decorative:a,orientation:n=de,...c}=t,r=jt(n)?n:de,u=a?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return e.jsx(ft.div,{"data-orientation":r,...u,...c,ref:s})});ye.displayName=bt;function jt(t){return gt.includes(t)}var vt=ye;function Nt({className:t,orientation:s="horizontal",decorative:a=!0,...n}){return e.jsx(vt,{"data-slot":"separator",decorative:a,orientation:s,className:S("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}const yt=({expenses:t,isLoading:s})=>e.jsx("div",{children:e.jsxs(rt,{className:"w-min md:w-full border-collapse",children:[e.jsx(nt,{children:e.jsxs(H,{className:"text-base",children:[e.jsx(T,{className:"p-2 text-left border border-gray-200",children:"Date"}),e.jsx(T,{className:"p-2 text-left border border-gray-200",children:"Remark"}),e.jsx(T,{className:"p-2 text-left border border-gray-200",children:"Amount"}),e.jsx(T,{className:"p-2 text-left border border-gray-200",children:"Category"}),e.jsx(T,{className:"p-2 text-left border border-gray-200",children:"Payment Mode"})]})}),e.jsxs(ot,{children:[t?.map(a=>e.jsxs(H,{children:[e.jsx(_,{className:"p-2 border border-gray-200",children:Ve(a.date)}),e.jsx(_,{className:"p-2 text-base font-medium border border-gray-200",children:a.remark}),e.jsx(_,{className:"p-2 text-base font-medium border border-gray-200",children:a.amount}),e.jsx(_,{className:"p-2 border border-gray-200",children:e.jsx("span",{className:"px-1 text-sm border rounded-sm bg-purple-100 text-purple-800",children:a?.categories?.name})}),e.jsx(_,{className:"p-2 border border-gray-200",children:e.jsx("span",{className:"px-1 text-sm border rounded-sm bg-indigo-100 text-indigo-800",children:a?.payment_modes?.name})})]},a.id)),s&&e.jsx(H,{className:"hover:bg-transparent",children:e.jsx(_,{colSpan:5,children:e.jsx(I,{show:!0})})})]})]})});var F="Switch",[kt]=be(F),[wt,Ct]=kt(F),ke=o.forwardRef((t,s)=>{const{__scopeSwitch:a,name:n,checked:c,defaultChecked:r,required:d,disabled:u,value:m="on",onCheckedChange:x,form:p,...i}=t,[f,l]=o.useState(null),b=z(s,k=>l(k)),v=o.useRef(!1),j=f?p||!!f.closest("form"):!0,[h,N]=fe({prop:c,defaultProp:r??!1,onChange:x,caller:F});return e.jsxs(wt,{scope:a,checked:h,disabled:u,children:[e.jsx(D.button,{type:"button",role:"switch","aria-checked":h,"aria-required":d,"data-state":Ee(h),"data-disabled":u?"":void 0,disabled:u,value:m,...i,ref:b,onClick:G(t.onClick,k=>{N(C=>!C),j&&(v.current=k.isPropagationStopped(),v.current||k.stopPropagation())})}),j&&e.jsx(Se,{control:f,bubbles:!v.current,name:n,value:m,checked:h,required:d,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});ke.displayName=F;var we="SwitchThumb",Ce=o.forwardRef((t,s)=>{const{__scopeSwitch:a,...n}=t,c=Ct(we,a);return e.jsx(D.span,{"data-state":Ee(c.checked),"data-disabled":c.disabled?"":void 0,...n,ref:s})});Ce.displayName=we;var St="SwitchBubbleInput",Se=o.forwardRef(({__scopeSwitch:t,control:s,checked:a,bubbles:n=!0,...c},r)=>{const d=o.useRef(null),u=z(d,r),m=ge(a),x=je(s);return o.useEffect(()=>{const p=d.current;if(!p)return;const i=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(i,"checked").set;if(m!==a&&l){const b=new Event("click",{bubbles:n});l.call(p,a),p.dispatchEvent(b)}},[m,a,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...c,tabIndex:-1,ref:u,style:{...c.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Se.displayName=St;function Ee(t){return t?"checked":"unchecked"}var Et=ke,_t=Ce;function _e({className:t,...s}){return e.jsx(Et,{"data-slot":"switch",className:S("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(_t,{"data-slot":"switch-thumb",className:S("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const Tt=({expenses:t,isLoading:s,paginationData:a,setCurrentPage:n})=>{const{totalItems:c=0,totalPages:r=0,currentPage:d=1,from:u=0,to:m=0}=a??{},[x,p]=o.useState(!1);return!s&&(!t||t.length===0)?e.jsx("div",{className:"flex flex-col items-center justify-center h-24 w-full",children:e.jsx("p",{className:"text-gray-500 text-lg",children:"No expenses found."})}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{checked:x,onCheckedChange:p,id:"show-table-view"}),e.jsx(Ne,{htmlFor:"show-table-view",children:"Table View"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm font-medium w-full",children:e.jsxs("span",{children:["Showing ",u,"-",m," of ",c," entries"]})}),e.jsxs("div",{className:"flex w-full justify-end items-center gap-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm font-medium",children:[e.jsx("span",{children:"Page"}),e.jsxs(L,{defaultValue:`${d}`,onValueChange:i=>{n&&n(Number(i))},children:[e.jsx(M,{className:"w-fit px-2",id:"rows-per-page",children:e.jsx(A,{})}),e.jsx(O,{side:"top",children:Array.from({length:r},(i,f)=>f+1).map(i=>e.jsx(y,{value:`${i}`,children:i},i))})]}),e.jsxs("span",{children:["of ",r]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:"outline",className:"rounded-sm",size:"icon",disabled:d===1,onClick:()=>{n&&n(d-1)},children:e.jsx(Ke,{})}),e.jsx(E,{variant:"outline",className:"rounded-sm",size:"icon",disabled:d===r,onClick:()=>{n&&n(d+1)},children:e.jsx(Ye,{})})]})]})]}),e.jsx("div",{className:"rounded-sm",children:x?e.jsx(yt,{expenses:t,isLoading:s}):e.jsx(tt,{className:"h-[500px] md:h-[700px] w-full p-3 bg-neutral-100",children:e.jsx("div",{className:"flex flex-col gap-3",children:s?e.jsx(I,{show:s}):qe(t||[]).map(({date:i,expenses:f})=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"text-base font-semibold text-neutral-600 w-full flex justify-center items-center my-1",children:$e(i,"dd MMMM yyyy")}),f?.map(l=>e.jsx(st,{expense:l,showActions:!0},l.id))]}))})})})]})},ue=({selectedDuration:t,setSelectedDuration:s,setCustomDuration:a})=>{const[n,c]=o.useState(!1),[r,d]=o.useState(void 0),[u,m]=o.useState(!1),[x,p]=o.useState(void 0);return o.useEffect(()=>{r&&x&&a?.({startDate:r,endDate:x})},[r,x]),t==="custom_range"?e.jsx("div",{className:"flex gap-4 mb-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-0 bg-slate-100 text-slate-800 px-2 rounded-xs",children:[e.jsxs("div",{className:"flex gap-0 items-center",children:[e.jsx("span",{className:"text-base font-medium",children:"Duration:"}),e.jsxs(L,{defaultValue:"this_month",onValueChange:i=>s(i),value:t,children:[e.jsx(M,{className:"border-0 shadow-none px-1 gap-0.5 text-base focus-visible:border-0 focus-visible:ring-0",children:e.jsx(A,{})}),e.jsx(O,{children:e.jsxs(U,{children:[e.jsx(ne,{children:"Duration"}),e.jsx(y,{value:"this_month",children:"This Month"}),e.jsx(y,{value:"last_month",children:"Last Month"}),e.jsx(y,{value:"this_year",children:"This Year"}),e.jsx(y,{value:"all_time",children:"All Time"}),e.jsx(y,{value:"custom_range",children:"Custom Range"})]})})]})]}),e.jsxs("div",{className:"flex gap-0 items-center",children:[e.jsx("span",{className:"text-base font-medium mx-2",children:"From:"}),e.jsxs(te,{open:n,onOpenChange:c,children:[e.jsx(se,{asChild:!0,className:"border-0 bg-transparent hover:bg-transparent text-base font-normal px-1 has-[>svg]:px-1",children:e.jsxs(E,{variant:"outline",id:"date",className:"justify-between font-normal",children:[r?r.toLocaleDateString():"Select date",e.jsx(oe,{})]})}),e.jsx(ae,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(ie,{mode:"single",selected:r,captionLayout:"dropdown",onSelect:i=>{d(i),c(!1)}})})]})]}),e.jsxs("div",{className:"flex gap-0 items-center",children:[e.jsx("span",{className:"text-base font-medium mx-2",children:"To:"}),e.jsxs(te,{open:u,onOpenChange:m,children:[e.jsx(se,{asChild:!0,className:"border-0 bg-transparent hover:bg-transparent text-base font-normal px-1 has-[>svg]:px-1",children:e.jsxs(E,{variant:"outline",id:"date",className:"justify-between font-normal",children:[x?x.toLocaleDateString():"Select date",e.jsx(oe,{})]})}),e.jsx(ae,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(ie,{mode:"single",selected:x,captionLayout:"dropdown",onSelect:i=>{p(i),m(!1)}})})]})]})]})}):e.jsxs("div",{className:"col-span-4 lg:col-span-2 flex gap-0 items-center bg-slate-100 text-slate-800 px-2 rounded-xs max-w-[200px]",children:[e.jsx("span",{className:"text-base font-medium",children:"Duration:"}),e.jsxs(L,{defaultValue:"this_month",onValueChange:i=>s(i),value:t,children:[e.jsx(M,{className:"border-0 shadow-none px-1 gap-0.5 text-base focus-visible:border-0 focus-visible:ring-0",children:e.jsx(A,{})}),e.jsx(O,{children:e.jsxs(U,{children:[e.jsx(ne,{children:"Duration"}),e.jsx(y,{value:"this_month",children:"This Month"}),e.jsx(y,{value:"last_month",children:"Last Month"}),e.jsx(y,{value:"this_year",children:"This Year"}),e.jsx(y,{value:"all_time",children:"All Time"}),e.jsx(y,{value:"custom_range",children:"Custom Range"})]})})]})]})};function me({className:t,...s}){return e.jsx("div",{"data-slot":"input-group",role:"group",className:S("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40",t),...s})}const Pt=He("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5","block-end":"order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5"}},defaultVariants:{align:"inline-start"}});function It({className:t,align:s="inline-start",...a}){return e.jsx("div",{role:"group","data-slot":"input-group-addon","data-align":s,className:S(Pt({align:s}),t),onClick:n=>{n.target.closest("button")||n.currentTarget.parentElement?.querySelector("input")?.focus()},...a})}function xe({className:t,...s}){return e.jsx(it,{"data-slot":"input-group-control",className:S("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",t),...s})}var V="Checkbox",[Dt]=be(V),[Rt,Q]=Dt(V);function Bt(t){const{__scopeCheckbox:s,checked:a,children:n,defaultChecked:c,disabled:r,form:d,name:u,onCheckedChange:m,required:x,value:p="on",internal_do_not_use_render:i}=t,[f,l]=fe({prop:a,defaultProp:c??!1,onChange:m,caller:V}),[b,v]=o.useState(null),[j,h]=o.useState(null),N=o.useRef(!1),k=b?!!d||!!b.closest("form"):!0,C={checked:f,disabled:r,setChecked:l,control:b,setControl:v,name:u,form:d,value:p,hasConsumerStoppedPropagationRef:N,required:x,defaultChecked:w(c)?!1:c,isFormControl:k,bubbleInput:j,setBubbleInput:h};return e.jsx(Rt,{scope:s,...C,children:Lt(i)?i(C):n})}var Te="CheckboxTrigger",Pe=o.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:a,...n},c)=>{const{control:r,value:d,disabled:u,checked:m,required:x,setControl:p,setChecked:i,hasConsumerStoppedPropagationRef:f,isFormControl:l,bubbleInput:b}=Q(Te,t),v=z(c,p),j=o.useRef(m);return o.useEffect(()=>{const h=r?.form;if(h){const N=()=>i(j.current);return h.addEventListener("reset",N),()=>h.removeEventListener("reset",N)}},[r,i]),e.jsx(D.button,{type:"button",role:"checkbox","aria-checked":w(m)?"mixed":m,"aria-required":x,"data-state":Me(m),"data-disabled":u?"":void 0,disabled:u,value:d,...n,ref:v,onKeyDown:G(s,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:G(a,h=>{i(N=>w(N)?!0:!N),b&&l&&(f.current=h.isPropagationStopped(),f.current||h.stopPropagation())})})});Pe.displayName=Te;var Ie=o.forwardRef((t,s)=>{const{__scopeCheckbox:a,name:n,checked:c,defaultChecked:r,required:d,disabled:u,value:m,onCheckedChange:x,form:p,...i}=t;return e.jsx(Bt,{__scopeCheckbox:a,checked:c,defaultChecked:r,disabled:u,required:d,onCheckedChange:x,name:n,form:p,value:m,internal_do_not_use_render:({isFormControl:f})=>e.jsxs(e.Fragment,{children:[e.jsx(Pe,{...i,ref:s,__scopeCheckbox:a}),f&&e.jsx(Le,{__scopeCheckbox:a})]})})});Ie.displayName=V;var De="CheckboxIndicator",Re=o.forwardRef((t,s)=>{const{__scopeCheckbox:a,forceMount:n,...c}=t,r=Q(De,a);return e.jsx(Ge,{present:n||w(r.checked)||r.checked===!0,children:e.jsx(D.span,{"data-state":Me(r.checked),"data-disabled":r.disabled?"":void 0,...c,ref:s,style:{pointerEvents:"none",...t.style}})})});Re.displayName=De;var Be="CheckboxBubbleInput",Le=o.forwardRef(({__scopeCheckbox:t,...s},a)=>{const{control:n,hasConsumerStoppedPropagationRef:c,checked:r,defaultChecked:d,required:u,disabled:m,name:x,value:p,form:i,bubbleInput:f,setBubbleInput:l}=Q(Be,t),b=z(a,l),v=ge(r),j=je(n);o.useEffect(()=>{const N=f;if(!N)return;const k=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(k,"checked").set,B=!c.current;if(v!==r&&R){const q=new Event("click",{bubbles:B});N.indeterminate=w(r),R.call(N,w(r)?!1:r),N.dispatchEvent(q)}},[f,v,r,c]);const h=o.useRef(w(r)?!1:r);return e.jsx(D.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??h.current,required:u,disabled:m,name:x,value:p,form:i,...s,tabIndex:-1,ref:b,style:{...s.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Le.displayName=Be;function Lt(t){return typeof t=="function"}function w(t){return t==="indeterminate"}function Me(t){return w(t)?"indeterminate":t?"checked":"unchecked"}function Mt({className:t,...s}){return e.jsx(Ie,{"data-slot":"checkbox",className:S("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(Re,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:e.jsx(We,{className:"size-3.5"})})})}const he=({options:t=[],selected:s=[],onChange:a,placeholder:n="Select items...",showSearch:c=!0,showActions:r=!0})=>{const[d,u]=o.useState(!1),[m,x]=o.useState(""),p=o.useRef(null);o.useEffect(()=>{const l=b=>{p.current&&!p.current.contains(b.target)&&u(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const i=l=>{const b=s.includes(l)?s.filter(v=>v!==l):[...s,l];a(b)},f=t.filter(l=>l.label.toLowerCase().includes(m.toLowerCase())).sort((l,b)=>{const v=s.includes(l.value),j=s.includes(b.value);return v&&!j?-1:!v&&j?1:l.label.localeCompare(b.label)});return e.jsxs("div",{className:"relative min-w-[180px] max-w-[250px] text-zinc-900",ref:p,children:[e.jsxs("div",{className:"flex min-h-9 w-full items-center justify-between rounded-md bg-transparent px-2 py-1 text-sm cursor-pointer",onClick:()=>u(!d),children:[e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.length===0&&e.jsx("span",{className:"text-muted-foreground",children:n}),s.length>0&&e.jsxs("span",{className:"flex items-center gap-2 text-secondary-foreground border rounded bg-secondary px-1.5 py-0.5 text-sm font-medium",children:[s.length," selected",e.jsx("div",{role:"button",className:"rounded-full p-0.5 hover:bg-secondary-foreground/20",onClick:()=>a([]),children:e.jsx(ve,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsx(Je,{className:"h-4 w-4 shrink-0 opacity-50"})]}),d&&e.jsxs("div",{className:"absolute z-50 mt-1 max-h-60 w-full overflow-auto border bg-popover",children:[c&&e.jsx("div",{className:"sticky top-0 bg-popover p-2 z-10",children:e.jsx("input",{type:"text",className:"w-full border bg-transparent px-3 py-1 text-sm",placeholder:"Search...",value:m,onChange:l=>x(l.target.value),onClick:l=>l.stopPropagation()})}),e.jsxs("div",{className:"p-1",children:[f.length>0?f.map(l=>e.jsxs("div",{className:"relative flex gap-2 cursor-pointer select-none items-center px-2 py-1.5 text-sm hover:bg-accent",onClick:()=>i(l.value),children:[e.jsx(Mt,{checked:s.includes(l.value),onCheckedChange:()=>i(l.value)}),e.jsx("span",{children:l.label})]},l.value)):e.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No results found."}),r&&e.jsxs("div",{className:"flex gap-3 justify-end my-2",children:[e.jsx(E,{className:"cursor-pointer",variant:"secondary",size:"sm",onClick:()=>a([]),children:"Clear"}),e.jsx(E,{className:"cursor-pointer",onClick:()=>u(!1),size:"sm",children:"Apply"})]})]})]})]})};function P(t,s){const[a,n]=o.useState(t);return o.useEffect(()=>{const c=setTimeout(()=>{n(t)},s);return()=>{clearTimeout(c)}},[t,s]),a}const Qt=()=>{const[t,s]=o.useState("this_month"),[a,n]=o.useState(),[c,r]=o.useState(""),[d,u]=o.useState({condition:"gte",amount:0}),[m,x]=o.useState([]),[p,i]=o.useState([]),[f,l]=o.useState(1),[b,v]=o.useState(!1),{bookId:j}=Ue(),h=Qe(g=>g.userId),{data:N}=Ze(h,Number(j)),{data:k}=dt(h),{startDate:C,endDate:R}=Xe(t,a),B={startDate:C,endDate:R,categoryIds:P(m,1500).map(g=>Number(g)),paymentModeIds:P(p,1500).map(g=>Number(g)),searchQuery:P(c,1500),amountQuery:{condition:d.condition,amount:P(d.amount,1500)},page:P(f,500)},{data:q,isLoading:X}=lt(h),K=q?.find(g=>g.id===Number(j)),{data:Y,isLoading:Ae}=et(Number(j),h,B),{data:W,isLoading:J}=le(Number(j),h),{data:Z,isLoading:ee}=le(Number(j),h,B),{data:$,isLoading:Oe}=ct(h,Number(j)),ze=()=>{s("this_month"),n(void 0),r(""),x([]),i([]),u({condition:"gte",amount:0})};return e.jsx("div",{className:"header-margin pb-5",children:e.jsxs("div",{className:"container mx-auto h-min-screen",children:[e.jsx("div",{className:"my-2 bg-blue-100 text-blue-800 rounded-xs p-2 text-center",children:X?e.jsx(I,{show:X}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-semibold mb-1",children:K?.name}),e.jsx("span",{className:"text-sm",children:K?.description})]})}),e.jsx("div",{className:"mx-2",children:e.jsxs("div",{className:"bg-white p-2 rounded border",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{checked:b,onCheckedChange:v,id:"show-filters"}),e.jsx(Ne,{htmlFor:"show-filters",children:"Filters"})]})}),b&&e.jsxs("div",{children:[t==="custom_range"&&e.jsx(ue,{selectedDuration:t,setSelectedDuration:s,setCustomDuration:n}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 lg:grid-cols-15 gap-4 mb-4",children:[t!=="custom_range"&&e.jsx(ue,{selectedDuration:t,setSelectedDuration:s}),e.jsxs("div",{className:"col-span-5 lg:col-span-3 flex gap-0 items-center w-fit bg-purple-100 text-purple-800 px-2 rounded-xs max-w-[280px]",children:[e.jsx("span",{className:"text-base font-medium",children:"Category:"}),e.jsx(he,{options:N?.map(g=>({value:g.id.toString(),label:g.name})),selected:m,onChange:x,placeholder:"Choose categories..."})]}),e.jsxs("div",{className:"col-span-5 lg:col-span-3 flex gap-0 items-center w-fit bg-indigo-100 text-indigo-800 px-2 rounded-xs max-w-[280px]",children:[e.jsx("span",{className:"text-base font-medium",children:"Pay Mode:"}),e.jsx(he,{options:k?.map(g=>({value:g.id.toString(),label:g.name})),selected:p,onChange:i,placeholder:"Choose...",showSearch:!1,showActions:!1})]}),e.jsx("div",{className:"col-span-2 lg:col-span-1",children:e.jsxs(E,{variant:"ghost",className:"rounded-xs gap-0.5 bg-red-100 hover:bg-red-200 text-red-800 hover:text-red-900 max-w-[120px]",onClick:ze,children:[e.jsx(ve,{}),"Clear"]})})]}),e.jsxs("div",{className:"flex sm:flex-row flex-col gap-4 mb-4 justify-between",children:[e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx(me,{className:"rounded-xs max-w-[150px] md:max-w-full",children:e.jsx(xe,{placeholder:"Search by remark...",onChange:g=>r(g.target.value)})}),e.jsxs(me,{className:"rounded-xs",children:[e.jsx(It,{align:"inline-start",children:e.jsxs(L,{defaultValue:"gte",onValueChange:g=>u({...d,condition:g}),children:[e.jsx(M,{className:"border-0 shadow-none px-1 gap-1 text-base font-medium",children:e.jsx(A,{placeholder:""})}),e.jsx(O,{children:e.jsxs(U,{children:[e.jsxs(y,{className:"font-medium",value:"gte",children:["Amount ",e.jsx("span",{className:"text-lg",children:" ≥"})]}),e.jsxs(y,{className:"font-medium",value:"lte",children:["Amount ",e.jsx("span",{className:"text-lg",children:" ≤"})]})]})})]})}),e.jsx(xe,{type:"number",placeholder:"Enter search query",onChange:g=>u({...d,amount:Number(g.target.value)})})]})]}),e.jsx(ce,{})]})]}),!b&&e.jsx("div",{className:"flex justify-end mb-3",children:e.jsx(ce,{})}),e.jsxs("div",{className:"grid grid-cols-9 border rounded-sm p-3 mb-4",children:[e.jsxs("div",{className:"col-span-4 flex gap-2 items-center justify-center",children:[e.jsx("div",{className:"flex flex-col align-top h-full",children:e.jsx("span",{className:"p-2 mt-1 rounded-full border bg-indigo-100 text-indigo-900",children:e.jsx(ht,{className:"w-[25px] h-[25px]"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-base",children:t==="this_month"?"This Month":"Selected Period"}),ee?e.jsx(I,{show:ee}):e.jsxs("h1",{className:"text-2xl md:text-4xl font-medium",children:[re(),Z&&Z[0]?.sum||0]})]})]}),e.jsx("div",{className:"col-span-1 flex justify-center",children:e.jsx(Nt,{orientation:"vertical"})}),e.jsxs("div",{className:"col-span-4 flex gap-2 items-center justify-center",children:[e.jsx("div",{className:"flex flex-col align-top h-full",children:e.jsx("span",{className:"p-2 mt-1 rounded-full border bg-green-100 text-green-900",children:e.jsx(mt,{className:"w-[25px] h-[25px]"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-base",children:"All Time"}),J?e.jsx(I,{show:J}):e.jsxs("h1",{className:"text-2xl md:text-4xl font-medium",children:[re()," ",W&&W[0]?.sum||0]})]})]})]}),e.jsx(Tt,{expenses:Y?.data,isLoading:Ae,paginationData:Y?.meta,setCurrentPage:l})]})}),$&&$.length>0&&e.jsx("div",{className:"mt-4 px-2",children:e.jsx(at,{data:$,isLoading:Oe,chartTitle:"Monthly Expenses By Category",chartDescription:"Monthly Expenses By Category in last 12 months",dataKey:"category_name"})})]})})};export{Qt as default};
